{"ast":null,"code":"import { EventEmitter } from \"@angular/core\";\nimport { DatePipe, NgClass } from \"@angular/common\";\nimport { UserModel } from \"@core/models/user.model\";\nimport { ImagePreviewPipe } from \"@ux/pipes/image-preview.pipe\";\nimport * as moment from \"moment\";\nimport { getUserId } from \"@core/utils/getUserId\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@ux/pipes/image-preview.pipe\";\nfunction AvatarComponent_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 5);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"background-image\", \"url(\" + ctx_r0.image + \")\");\n  }\n}\nfunction AvatarComponent_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.shortUserName);\n  }\n}\nfunction AvatarComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6);\n    i0.ɵɵelement(1, \"i\", 7);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AvatarComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 8);\n  }\n}\nfunction AvatarComponent_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵlistener(\"click\", function AvatarComponent_span_6_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.remove.emit(ctx_r0.user));\n    });\n    i0.ɵɵelement(1, \"i\", 10);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let AvatarComponent = /*#__PURE__*/(() => {\n  class AvatarComponent {\n    set active(value) {\n      this._active = value;\n      this._setStyle();\n    }\n    set user(user) {\n      this._user = user;\n      this._setStyle();\n      this._setAvatarUrl();\n      this._setUserName();\n    }\n    get user() {\n      return this._user;\n    }\n    constructor(ngClass, imagePreviewPipe) {\n      this.ngClass = ngClass;\n      this.imagePreviewPipe = imagePreviewPipe;\n      this._active = false;\n      this.showDeleteBtn = false;\n      this.remove = new EventEmitter();\n      this._authUserId = getUserId();\n    }\n    ngOnInit() {}\n    get isOnline() {\n      if (!this.user) {\n        return false;\n      }\n      if (this.user.id === this._authUserId) {\n        return true;\n      }\n      const lastActiveDate = moment(this.user.activityAt).add(5, \"minutes\").valueOf();\n      const currentDate = moment().valueOf();\n      return lastActiveDate >= currentDate;\n    }\n    _setAvatarUrl() {\n      if (this._user && this._user.avatar) {\n        this.image = this.imagePreviewPipe.transform(this._user.avatar, 150, 150, true);\n      } else {\n        this.image = null;\n      }\n    }\n    _setUserName() {\n      if (this._user) {\n        this.shortUserName = this._user.firstName ? this._user.firstName[0] : \"?\";\n      } else {\n        this.shortUserName = null;\n      }\n    }\n    _setStyle() {\n      const classes = [];\n      if (this._user) {\n        classes.push(this._user.avatarCssStyle);\n      } else {\n        classes.push(\"avatar_bg-empty\");\n      }\n      if (this._active) {\n        classes.push(\"avatar_active\");\n      }\n      this.ngClass.ngClass = classes;\n      this.ngClass.ngDoCheck();\n    }\n    static #_ = (() => this.ɵfac = function AvatarComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AvatarComponent)(i0.ɵɵdirectiveInject(i1.NgClass, 2), i0.ɵɵdirectiveInject(i2.ImagePreviewPipe));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AvatarComponent,\n      selectors: [[\"ux-avatar\"]],\n      inputs: {\n        showDeleteBtn: \"showDeleteBtn\",\n        active: \"active\",\n        user: \"user\"\n      },\n      outputs: {\n        remove: \"remove\"\n      },\n      decls: 7,\n      vars: 9,\n      consts: [[1, \"avatar__wrapper\", 3, \"title\"], [\"class\", \"avatar__image\", 3, \"backgroundImage\", 4, \"ngIf\"], [\"class\", \"avatar__text\", 4, \"ngIf\"], [\"class\", \"avatar__online\", 4, \"ngIf\"], [\"class\", \"avatar__delete\", 3, \"click\", 4, \"ngIf\"], [1, \"avatar__image\"], [1, \"avatar__text\"], [1, \"icon-man\"], [1, \"avatar__online\"], [1, \"avatar__delete\", 3, \"click\"], [1, \"icon-close\"]],\n      template: function AvatarComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵpipe(1, \"date\");\n          i0.ɵɵtemplate(2, AvatarComponent_span_2_Template, 1, 2, \"span\", 1)(3, AvatarComponent_span_3_Template, 2, 1, \"span\", 2)(4, AvatarComponent_span_4_Template, 2, 0, \"span\", 2)(5, AvatarComponent_span_5_Template, 1, 0, \"span\", 3)(6, AvatarComponent_span_6_Template, 2, 0, \"span\", 4);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"title\", \"\\u0417\\u0430\\u0445\\u043E\\u0434\\u0438\\u043B(\\u0430) \" + i0.ɵɵpipeBind2(1, 6, ctx.user == null ? null : ctx.user.activityAt, \"yyyy-MM-dd HH:mm\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.image);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.shortUserName);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.shortUserName);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isOnline);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.showDeleteBtn);\n        }\n      },\n      dependencies: [DatePipe],\n      styles: [\".icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.bold[_ngcontent-%COMP%]{font-family:ProximaNovaBold}.light[_ngcontent-%COMP%]{font-family:ProximaNovaLight}.regular[_ngcontent-%COMP%]{font-family:ProximaNovaRegular}.deadline__color_overdue[_ngcontent-%COMP%], .deadline__color_overdue[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff7d7d!important}.deadline__color_soon[_ngcontent-%COMP%], .deadline__color_soon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f8c948!important}[_nghost-%COMP%]{display:inline-block;position:relative;cursor:pointer;flex-shrink:0}[_nghost-%COMP%]:before{content:\\\"\\\";border-radius:50%;border:2px solid transparent;position:absolute;inset:-3px;z-index:0;transition:border .2s ease-out}[_nghost-%COMP%]:hover   .avatar__delete[_ngcontent-%COMP%]{display:flex}.avatar_online-big[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{left:10px;bottom:3px}.avatar_bg-1[_nghost-%COMP%]   .avatar__wrapper[_ngcontent-%COMP%]{background-color:#fff1d8}.avatar_bg-1[_nghost-%COMP%]   .avatar__text[_ngcontent-%COMP%]{color:#ffb126}.avatar_bg-1[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{background-color:#ffb126}.avatar_bg-2[_nghost-%COMP%]   .avatar__wrapper[_ngcontent-%COMP%]{background-color:#b2f3ed}.avatar_bg-2[_nghost-%COMP%]   .avatar__text[_ngcontent-%COMP%]{color:#21d2c1}.avatar_bg-2[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{background-color:#21d2c1}.avatar_bg-3[_nghost-%COMP%]   .avatar__wrapper[_ngcontent-%COMP%]{background-color:#fee6ee}.avatar_bg-3[_nghost-%COMP%]   .avatar__text[_ngcontent-%COMP%]{color:#f73a79}.avatar_bg-3[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{background-color:#f73a79}.avatar_bg-4[_nghost-%COMP%]   .avatar__wrapper[_ngcontent-%COMP%]{background-color:#fee6ee}.avatar_bg-4[_nghost-%COMP%]   .avatar__text[_ngcontent-%COMP%]{color:#f73a79}.avatar_bg-4[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{background-color:#f73a79}.avatar_bg-5[_nghost-%COMP%]   .avatar__wrapper[_ngcontent-%COMP%]{background-color:#e3e0f1}.avatar_bg-5[_nghost-%COMP%]   .avatar__text[_ngcontent-%COMP%]{color:#7465b9}.avatar_bg-5[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{background-color:#7465b9}.avatar_bg-6[_nghost-%COMP%]   .avatar__wrapper[_ngcontent-%COMP%]{background-color:#cff6e2}.avatar_bg-6[_nghost-%COMP%]   .avatar__text[_ngcontent-%COMP%]{color:#39da87}.avatar_bg-6[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{background-color:#39da87}.avatar_bg-empty[_nghost-%COMP%]   .avatar__wrapper[_ngcontent-%COMP%]{background-color:#e1ecee}.avatar_bg-empty[_nghost-%COMP%]   .avatar__text[_ngcontent-%COMP%]{color:#6fa4ad}.avatar_bg-empty[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{background-color:#6fa4ad}.avatar_bg-1[_nghost-%COMP%]:hover:before, .avatar_bg-1.avatar_active[_nghost-%COMP%]:before{border-color:#ffb126}.avatar_bg-2[_nghost-%COMP%]:hover:before, .avatar_bg-2.avatar_active[_nghost-%COMP%]:before{border-color:#21d2c1}.avatar_bg-3[_nghost-%COMP%]:hover:before, .avatar_bg-3.avatar_active[_nghost-%COMP%]:before{border-color:#f73a79}.avatar_bg-4[_nghost-%COMP%]:hover:before, .avatar_bg-4.avatar_active[_nghost-%COMP%]:before{border-color:#f73a79}.avatar_bg-5[_nghost-%COMP%]:hover:before, .avatar_bg-5.avatar_active[_nghost-%COMP%]:before{border-color:#7465b9}.avatar_bg-6[_nghost-%COMP%]:hover:before, .avatar_bg-6.avatar_active[_nghost-%COMP%]:before{border-color:#39da87}.avatar_bg-empty[_nghost-%COMP%]:hover:before, .avatar_bg-empty.avatar_active[_nghost-%COMP%]:before{border-color:#6fa4ad}.avatar_bg-empty[_nghost-%COMP%]   .avatar__delete[_ngcontent-%COMP%], .avatar_bg-empty[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{display:none}.avatar_border-white[_nghost-%COMP%]:before{inset:-2px;border-color:#fff}.avatar_border-white[_nghost-%COMP%]:hover:before{border-color:#fff}[_nghost-%COMP%]   .avatar__wrapper[_ngcontent-%COMP%]{display:flex;position:relative;align-items:center;justify-content:center;min-width:100%;min-height:100%;border-radius:50%}[_nghost-%COMP%]   .avatar__image[_ngcontent-%COMP%]{border-radius:50%;position:absolute;inset:0;background-position:50% 50%;background-size:cover}[_nghost-%COMP%]   .avatar__text[_ngcontent-%COMP%]{text-transform:uppercase;font-family:ProximaNovaBold}[_nghost-%COMP%]   .avatar__online[_ngcontent-%COMP%]{position:absolute;left:-1px;bottom:-1px;box-sizing:content-box;width:6px;height:6px;border:2px solid #fff;border-radius:50%}[_nghost-%COMP%]   .avatar__delete[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;position:absolute;right:-5px;top:-5px;width:13px;height:13px;border-radius:50%;background-color:#f68989;color:#fff}[_nghost-%COMP%]   .avatar__delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;font-size:7px;height:9.7px}\"],\n      changeDetection: 0\n    }))();\n  }\n  return AvatarComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}